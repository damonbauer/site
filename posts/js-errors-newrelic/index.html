<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description" content="Reporting JavaScript Errors To New Relic" />
    <title>Reporting JavaScript Errors To New Relic</title>
    <style type="text/css">body{max-width:600px;font-size:20px}</style>
  </head>
  <body>
    <header>
      <a href="/">damon bauer's blog</a><br>
      <span>developer, amateur woodworker</span>
    </header><br><br>

    <small>2019-12-20</small>
    <h1 style="margin-top:0">
      Reporting JavaScript Errors To New Relic
    </h1>
    <p>With New Relic configured properly, unhandled exceptions will be handled and recorded by New Relic automatically. If you want to record a error manually while allowing your code to continue to execute, you can build a quick utility function.</p>
<h3>Utility Function</h3>
<pre><code class="language-js">// src/utils.js

/**
 * Log an instance of an Error to New Relic.
 * @param error Error - The error to log.
 * @returns undefined
 */
const logErrorEvent = (error) =&gt; {
  if (
    error instanceof Error &amp;&amp;
    window.newrelic &amp;&amp;
    typeof window.newrelic.noticeError === 'function'
  ) {
    window.newrelic.noticeError(error);
  }
};

export { logErrorEvent };
</code></pre>
<p>The <code>if</code> in this function checks to make sure:</p>
<ol>
<li>Is the argument to <code>error</code> an instance of the <code>Error</code> class?</li>
<li>Is <code>window.newrelic</code> defined?</li>
<li>Is <code>window.newrelic.noticeError</code> defined &amp; is it a <code>function</code>?</li>
</ol>
<h3>Usage</h3>
<pre><code class="language-js">import { logErrorEvent } from './src/utils';

fetch('https://example.com')
  .then(response =&gt; response.json())
  .then(json =&gt; {
    if (json.error.code) {
      logErrorEvent(new Error(json.error.code))
    }
  })
  .catch(error =&gt; logErrorEvent(error);
</code></pre>

    <a href="/">‚Üê Back</a>
  </body>
</html>
